[
  {
    "objectID": "20231804T160439/index.html",
    "href": "20231804T160439/index.html",
    "title": "Relacionamento das bases no relatório operacional: método Concatenate x Linktable",
    "section": "",
    "text": "As bases que compõem o relatório operacional, painel de dados de uso na SPLOR que utiliza a ferramenta de BI qlikview, são provenientes do armazém B.O, universos SIAFI e SIAD, e também das bases de Restimativa de Despesa e Receita, que atualmente se encontram compartilhadas no OneDrive e são periodicamente atualizadas pelas equipes da DCMEFO e DCAF.\nEssas bases têm como característica apresentar diferentes granularidades (dimensões) nos dados entre elas, em razão das especificidades inerentes a natureza dos fluxos a que pertencem. E como será mostrado ao longo desta nota, isso acarreta em um desafio adicional ao usuário desenvolvedor do qlikview na tarefa de relacioná-las e gerar visualizações.\nO objetivo desta nota é apresentar as diferentens granularidades de cada uma das bases, bem como comparar o método de empilhamento das bases (mais intuitivo a usuários iniciantes), com o método linktable, solução encontrada para relacionar as bases do retório operacional."
  },
  {
    "objectID": "20231804T160439/index.html#passo-1-empilhar-as-bases-mensais-da-execução-da-despesa-2022",
    "href": "20231804T160439/index.html#passo-1-empilhar-as-bases-mensais-da-execução-da-despesa-2022",
    "title": "Relacionamento das bases no relatório operacional: método Concatenate x Linktable",
    "section": "Passo 1: Empilhar as bases mensais da Execução da Despesa 2022:",
    "text": "Passo 1: Empilhar as bases mensais da Execução da Despesa 2022:\n//cria uma tabela temporária com a execução de todos os meses de 2022.\n\nexecucao_temp:\nLOAD ANO, \n     MES, \n     UO_COD, \n     UE_COD, \n     UO_FINAN, \n     UPG_COD, \n     EMPENHO_NUM, \n     FUNCAO_COD, \n     ACAO_COD, \n     GRUPO_COD, \n     MODALIDADE_COD, \n     IAG_COD, \n     FONTE_COD, \n     IPU_COD, \n     PROCESSO_NUMERO, \n     CONTRATO_ENTRADA, \n     OBRA_NUMERO, \n     CONTRATO_NUMERO, \n     ELEMENTO_ITEM_COD, \n     ELEMENTO_ORIGEM_DEA_COD, \n     ITEM_ORIGEM_DEA_COD, \n     CREDOR_CNPJ_CPF, \n     DESPESA_EMP, \n     DESPESA_LIQ, \n     DESPESA_PAGA_ORC, \n     DESPESA_PAGA_FIN\nFROM\n[data-raw\\execucao_2022*]\n(ooxml, embedded labels, table is base);"
  },
  {
    "objectID": "20231804T160439/index.html#passo-2-empilhar-as-bases-crédito-inicial-e-autorizado-e-aprovação-de-cota-orçamentária-2022-na-tabela-de-execução-criada-no-passo-anterior",
    "href": "20231804T160439/index.html#passo-2-empilhar-as-bases-crédito-inicial-e-autorizado-e-aprovação-de-cota-orçamentária-2022-na-tabela-de-execução-criada-no-passo-anterior",
    "title": "Relacionamento das bases no relatório operacional: método Concatenate x Linktable",
    "section": "Passo 2: Empilhar as bases Crédito Inicial e Autorizado, e Aprovação de Cota Orçamentária 2022 na tabela de Execução criada no passo anterior:",
    "text": "Passo 2: Empilhar as bases Crédito Inicial e Autorizado, e Aprovação de Cota Orçamentária 2022 na tabela de Execução criada no passo anterior:\n//Cria uma tabela com os dados de execução, crédito inicial e autorizado, cota orçamentária e exclui a tabela temporária de execução utilizada para empillhar as bases mensais.\n\nNoConcatenate\n\nexecucao:\nLOAD ANO, \n     MES, \n     UO_COD, \n     UE_COD, \n     UO_FINAN, \n     UPG_COD, \n     EMPENHO_NUM, \n     FUNCAO_COD, \n     ACAO_COD, \n     GRUPO_COD, \n     MODALIDADE_COD, \n     IAG_COD, \n     FONTE_COD, \n     IPU_COD, \n     PROCESSO_NUMERO, \n     CONTRATO_ENTRADA, \n     OBRA_NUMERO, \n     CONTRATO_NUMERO, \n     ELEMENTO_ITEM_COD, \n     ELEMENTO_ORIGEM_DEA_COD, \n     ITEM_ORIGEM_DEA_COD, \n     CREDOR_CNPJ_CPF, \n     DESPESA_EMP, \n     DESPESA_LIQ, \n     DESPESA_PAGA_ORC, \n     DESPESA_PAGA_FIN\nResident execucao_temp;\n\nConcatenate\n\ncredito:\nLOAD ANO, \n     UO_COD, \n     ACAO_COD, \n     GRUPO_COD, \n     IAG_COD, \n     FONTE_COD, \n     IPU_COD, \n     CREDITO_INICIAL, \n     CREDITO_AUTORIZADO\nFROM\n[data-raw\\credito-inicial-autorizado_2022.xlsx]\n(ooxml, embedded labels, table is base);\n\nConcatenate\n\ncota:\n\nLOAD ANO, \n     UO_COD, \n     GRUPO_COD, \n     IAG_COD, \n     FONTE_COD, \n     IPU_COD, \n     ACAO_COD, \n     ELEMENTO_ITEM_COD, \n     [COTA APROVADA LIQUIDA]\nFROM\n[data-raw\\cota-item-data_2022.xlsx]\n(ooxml, embedded labels, table is base);\n\ndrop table execucao_temp;"
  },
  {
    "objectID": "20231804T160439/index.html#resultado",
    "href": "20231804T160439/index.html#resultado",
    "title": "Relacionamento das bases no relatório operacional: método Concatenate x Linktable",
    "section": "Resultado",
    "text": "Resultado\nApós seguir os passos anteriores e dar o comando ctrl R no script do qlikview para leitura das bases, o resultado será uma única tabela de dados empilhada, que pode ser verificada por meio do comando ctrl T, vide figura a seguir:\n[]."
  },
  {
    "objectID": "20231804T160439/index.html#criação-de-dashboards-no-método-de-empilhamento-das-bases-concatenate",
    "href": "20231804T160439/index.html#criação-de-dashboards-no-método-de-empilhamento-das-bases-concatenate",
    "title": "Relacionamento das bases no relatório operacional: método Concatenate x Linktable",
    "section": "Criação de dashboards no método de empilhamento das bases (Concatenate):",
    "text": "Criação de dashboards no método de empilhamento das bases (Concatenate):\nCom as bases lidas, dentro da aba de criação de dashboards no qlikview, o próximo passo é inserir Novo Objeto de Pasta do tipo Lista para objetos de filtro e Gráfico/Tabela Simples para criação da Tabela com os dados desejados.\nNo exemplo foi criada a Tabela 1 em que são visualizados dados de 2022 de Crédito Orçamentário, Cota Aprovada, Despesa Empenhada e Despesa Liquidada, por Unidade Orçamentária, Grupo de Despesa, Fonte de Recursos e Procedência. E como filtro, as dimensões Unidade Orçamentária (UO_COD), Ação (ACAO_COD), Grupo de Despesa (GRUPO_COD), Elemento Item de Despesa (ELEMENTO_ITEM_COD) e Número do Contrato (CONTRATO_NUMERO).\n[]."
  },
  {
    "objectID": "20231804T160439/index.html#utilização-dos-filtros-e-resultados-no-método-de-empilhamento-concatenate",
    "href": "20231804T160439/index.html#utilização-dos-filtros-e-resultados-no-método-de-empilhamento-concatenate",
    "title": "Relacionamento das bases no relatório operacional: método Concatenate x Linktable",
    "section": "Utilização dos filtros e resultados no método de empilhamento (concatenate)",
    "text": "Utilização dos filtros e resultados no método de empilhamento (concatenate)\nNos campos de filtro é possível se fazer a seleção desejada nos dados. Quando se filtra por dimensões existentes em todas as bases, como no exemplo, UO_COD, ACAO_COD ou GRUPO_COD, a tabela retorna valores desejados.\n[].\nContudo, quando se filtra por alguma dimensão não existente em alguma das bases da Tabela 1, seus dados retornam zerados. Neste exemplo, ao se filtrar por Elemento Item, os dados de Crédito Inicial e Autorizado retornam zero, por suas bases não conterem esta dimensão.\n[].\nA visualização mais informativa neste caso seria o retorno do Crédito Inicial e Autorizado na estrutura orçamentária em que houve a execução de despesas no Elemento Item selecionado; neste exemplo, UO_COD = 1501, ACAO_COD = 2500 e GRUPO_COD = 3.\nO mesmo problema ocorre ao filtramos por algum contrato. Neste caso, além do Crédito Inicial e Autorizado, a Cota Aprovada também retorna zero, pois inexiste essa dimensão nas bases a que pertencem. Do mesmo modo, a visualização desejada seria o retorno dos dados de Crédito Inicial e Autorizado e Cota Aprovada, na estrutura orçamentária em que houve a execução da despesa no contrato selecionado.\n[]."
  },
  {
    "objectID": "20231804T160439/index.html#passo-1-empilhar-as-bases-mensais-da-execução-da-despesa-2022-1",
    "href": "20231804T160439/index.html#passo-1-empilhar-as-bases-mensais-da-execução-da-despesa-2022-1",
    "title": "Relacionamento das bases no relatório operacional: método Concatenate x Linktable",
    "section": "Passo 1: Empilhar as bases mensais da Execução da Despesa 2022:",
    "text": "Passo 1: Empilhar as bases mensais da Execução da Despesa 2022:\n//cria uma tabela temporária com a execução de todos os meses de 2022.\n\nexecucao_temp:\nLOAD ANO, \n     MES, \n     UO_COD, \n     UE_COD, \n     UO_FINAN, \n     UPG_COD, \n     EMPENHO_NUM, \n     FUNCAO_COD, \n     ACAO_COD, \n     GRUPO_COD, \n     MODALIDADE_COD, \n     IAG_COD, \n     FONTE_COD, \n     IPU_COD, \n     PROCESSO_NUMERO, \n     CONTRATO_ENTRADA, \n     OBRA_NUMERO, \n     CONTRATO_NUMERO, \n     ELEMENTO_ITEM_COD, \n     ELEMENTO_ORIGEM_DEA_COD, \n     ITEM_ORIGEM_DEA_COD, \n     CREDOR_CNPJ_CPF, \n     DESPESA_EMP, \n     DESPESA_LIQ, \n     DESPESA_PAGA_ORC, \n     DESPESA_PAGA_FIN\nFROM\n[data-raw\\execucao_2022*]\n(ooxml, embedded labels, table is base);\n//Cria a chave1 na tabela fato e torna as variavéis dimensão como comentário no Script\n\nNoConcatenate\n\nexecucao:\nLOAD \nANO&'|'&MES&'|'&UO_COD&'|'&UE_COD&'|'&UO_FINAN &'|'&UPG_COD&'|'&EMPENHO_NUM&'|'&FUNCAO_COD&'|'&ACAO_COD&'|'&GRUPO_COD&'|'&MODALIDADE_COD&'|'&IAG_COD&'|'&FONTE_COD&'|'&IPU_COD&'|'&PROCESSO_NUMERO&'|'&CONTRATO_ENTRADA&'|'&OBRA_NUMERO&'|'&CONTRATO_NUMERO&'|'&ELEMENTO_ITEM_COD&'|'&ELEMENTO_ORIGEM_DEA_COD&'|'&ITEM_ORIGEM_DEA_COD&'|'&CREDOR_CNPJ_CPF as chave1,\n     //ANO, \n     //MES, \n     //UO_COD, \n     //UE_COD, \n     // UO_FINAN, \n     // UPG_COD, \n     // EMPENHO_NUM, \n     // FUNCAO_COD, \n     //ACAO_COD, \n     // GRUPO_COD, \n     //MODALIDADE_COD, \n     // IAG_COD, \n     // FONTE_COD, \n     //IPU_COD, \n     //PROCESSO_NUMERO, \n     //CONTRATO_ENTRADA, \n     //OBRA_NUMERO, \n     // CONTRATO_NUMERO, \n     // ELEMENTO_ITEM_COD, \n     // ELEMENTO_ORIGEM_DEA_COD, \n     //ITEM_ORIGEM_DEA_COD, \n     // CREDOR_CNPJ_CPF, \n     DESPESA_EMP, \n     DESPESA_LIQ, \n     DESPESA_PAGA_ORC, \n     DESPESA_PAGA_FIN\nResident execucao_temp;\n\n//Cria a chave2 na tabela fato e torna as variavéis dimensão como comentário no Script\n\ncredito:\nLOAD\nANO&'|'&UO_COD&'|'&ACAO_COD&'|'&GRUPO_COD&'|'&IAG_COD&'|'&FONTE_COD&'|'&IPU_COD as chave2,\n//ANO, \n//UO_COD, \n//ACAO_COD, \n//GRUPO_COD, \n//IAG_COD, \n//FONTE_COD, \n//IPU_COD, \n//CREDITO_INICIAL, \n//CREDITO_AUTORIZADO\nFROM\n[data-raw\\credito-inicial-autorizado_2022.xlsx]\n(ooxml, embedded labels, table is base);\n//Cria a chave3 na tabela fato e torna as variavéis dimensão como comentário no Script\n\ncota:\nLOAD \nANO&'|'&UO_COD&'|'&ACAO_COD&'|'&GRUPO_COD&'|'&IAG_COD&'|'&FONTE_COD&'|'&IPU_COD&'|'&ELEMENTO_ITEM_COD as chave3,\n//[Ano de Exercício], \n//UO_COD,\n//ACAO_COD, \n//GRUPO_COD, \n//IAG_COD, \n//FONTE_COD, \n//IPU_COD, \n//ELEMENTO_ITEM_COD, \n[COTA APROVADA LIQUIDA]\nFROM\n[data-raw\\cota-item-data_2022.xlsx]\n(ooxml, embedded labels, table is base);\n\n//cria a tabela link contendo todas as dimensões de todas as bases e cria chaves para comunicar com as tabelas fato\n//inserindo as dimensões da base de Execução de Despesas\nNoConcatenate\n\nlink:\nLOAD Distinct\nANO&'|'&MES&'|'&UO_COD&'|'&UE_COD&'|'&UO_FINAN &'|'&UPG_COD&'|'&EMPENHO_NUM&'|'&FUNCAO_COD&'|'&ACAO_COD&'|'&GRUPO_COD&'|'&MODALIDADE_COD&'|'&IAG_COD&'|'&FONTE_COD&'|'&IPU_COD&'|'&PROCESSO_NUMERO&'|'&CONTRATO_ENTRADA&'|'&OBRA_NUMERO&'|'&CONTRATO_NUMERO&'|'&ELEMENTO_ITEM_COD&'|'&ELEMENTO_ORIGEM_DEA_COD&'|'&ITEM_ORIGEM_DEA_COD&'|'&CREDOR_CNPJ_CPF as chave1, \nANO&'|'&UO_COD&'|'&ACAO_COD&'|'&GRUPO_COD&'|'&IAG_COD&'|'&FONTE_COD&'|'&IPU_COD as chave2,\nANO&'|'&UO_COD&'|'&ACAO_COD&'|'&GRUPO_COD&'|'&IAG_COD&'|'&FONTE_COD&'|'&IPU_COD&'|'&ELEMENTO_ITEM_COD as chave3,\nANO,\nMES,\nUO_COD,\nUE_COD,\nUO_FINAN, \nUPG_COD,\nEMPENHO_NUM,\nFUNCAO_COD,\nACAO_COD,\nGRUPO_COD,\nMODALIDADE_COD,\nIAG_COD,\nFONTE_COD,\nIPU_COD,\nPROCESSO_NUMERO,\nCONTRATO_ENTRADA,\nOBRA_NUMERO,\nCONTRATO_NUMERO,\nELEMENTO_ITEM_COD,\nELEMENTO_ORIGEM_DEA_COD,\nITEM_ORIGEM_DEA_COD,\nCREDOR_CNPJ_CPF\nresident execucao_temp;\n\nConcatenate\n\n//cria a tabela link contendo todas as dimensões de todas as bases e cria chaves para comunicar com as tabelas fato\n//inserindo as dimensões da base de Crédito Inicial e Autorizado\nlink:\nLOAD Distinct\nnull() as chave1,\nANO&'|'&UO_COD&'|'&ACAO_COD&'|'&GRUPO_COD&'|'&IAG_COD&'|'&FONTE_COD&'|'&IPU_COD as chave2,\nnull() as chave3,\nANO,\nUO_COD,\nACAO_COD,\nGRUPO_COD,\nIAG_COD,\nFONTE_COD,\nIPU_COD \nFROM\n[data-raw\\credito-inicial-autorizado_2022.xlsx]\n(ooxml, embedded labels, table is base);\n\nConcatenate\n\n//cria a tabela link contendo todas as dimensões de todas as bases e cria chaves para comunicar com as tabelas fato\n//inserindo as dimensões da base de Cota Aprovada\nlink:\nLOAD Distinct\nnull () as chave1,\nANO&'|'&UO_COD&'|'&ACAO_COD&'|'&GRUPO_COD&'|'&IAG_COD&'|'&FONTE_COD&'|'&IPU_COD as chave2,\nANO&'|'&UO_COD&'|'&ACAO_COD&'|'&GRUPO_COD&'|'&IAG_COD&'|'&FONTE_COD&'|'&IPU_COD&'|'&ELEMENTO_ITEM_COD as chave3,\nANO,\nUO_COD,\nACAO_COD,\nGRUPO_COD,\nIAG_COD,\nFONTE_COD,\nIPU_COD,\nELEMENTO_ITEM_COD\nFROM\n[data-raw\\cota-item-data_2022.xlsx]\n(ooxml, embedded labels, table is base);"
  },
  {
    "objectID": "20231804T160439/index.html#resultado-1",
    "href": "20231804T160439/index.html#resultado-1",
    "title": "Relacionamento das bases no relatório operacional: método Concatenate x Linktable",
    "section": "Resultado",
    "text": "Resultado\nApós seguir os passos anteriores e dar o comando ctrl R no script do qlikview, o resultado serão uma única tabela dimensão ligada as tabelas fato por meio de chaves, verificada por meio do comando ctrl T, conforme figura a seguir:\n[]."
  },
  {
    "objectID": "20231804T160439/index.html#criação-de-dashboards-no-método-linktable",
    "href": "20231804T160439/index.html#criação-de-dashboards-no-método-linktable",
    "title": "Relacionamento das bases no relatório operacional: método Concatenate x Linktable",
    "section": "Criação de dashboards no método Linktable:",
    "text": "Criação de dashboards no método Linktable:\nDe maneira análoga ao exemplo anterior de empilhamento de bases, foram utilizados os mesmos campos para criação da Tabela 2 e os filtros. Os dados totais sem filtro são exatamente iguais aos da Tabela 1.\n[]."
  },
  {
    "objectID": "20231804T160439/index.html#utilização-dos-filtros-e-resultados-no-método-linktable",
    "href": "20231804T160439/index.html#utilização-dos-filtros-e-resultados-no-método-linktable",
    "title": "Relacionamento das bases no relatório operacional: método Concatenate x Linktable",
    "section": "Utilização dos filtros e resultados no método linktable",
    "text": "Utilização dos filtros e resultados no método linktable\nAo se filtrar por alguma dimensão comum entre todas as bases das variáveis que compõem a Tabela 2, o resultado é o mesmo da Tabela 1, retornando dados corretamente.\n[].\nA diferença entre o método de empilhamento e o linktable ocorre ao se filtrar por alguma dimensão que inexiste em alguma das bases das variáveis que compõem a Tabela 2. Neste Caso, diferente do exemplo da Tabela 1, ao se filtrar por exemplo por Elemento Item, os dados de Crédito Inicial e Autorizado retornarão dados da estrutura orçamentária em que a houve Execução de Despesa, e/ou Aprovação de Cota.\n[].\nO mesmo ocorre quando se filtra por algum contrato, em que haverá o retorno de dados de Crédito Inicial e Autorizado e Cota Aprovada na estrutura orçamentária em que a Execução da Despesa nesse contrato ocorreu.\n[]."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Base de conhecimento - Assessoria de Dados SPLOR",
    "section": "",
    "text": "Order By\n       Default\n         \n          Date - Oldest\n        \n         \n          Date - Newest\n        \n         \n          Title\n        \n         \n          Author\n        \n     \n  \n    \n      \n      \n    \n\n\n\n\n\n\nDate\n\n\nTitle\n\n\nAuthor\n\n\nDescription\n\n\nCategories\n\n\n\n\n\n\n\nundefined\n\n\nRelacionamento das bases no relatório operacional: método Concatenate x Linktable\n\n\n\n\n\n\n\n\nundefined\n\n\n\n\n\n\nNo matching items"
  }
]